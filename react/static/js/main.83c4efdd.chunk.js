(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(25)},21:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),i=n.n(o),c=(n(21),n(2)),l=n(3),u=n(6),s=n(5),h=n(7),f=n(30),m=n(29),p=n(27),d=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,n=e.login;return r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),t()?r.a.createElement(p.a,{to:"/profile"},"View Profile"):r.a.createElement("button",{onClick:n},"Login"))}}]),t}(a.Component),b=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={profile:null,error:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadUserProfile()}},{key:"loadUserProfile",value:function(){var e=this;this.props.auth.getProfile(function(t,n){e.setState({profile:t,error:n})})}},{key:"render",value:function(){var e=this.state.profile;return e?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Profile"),r.a.createElement("p",null,e.nickname),r.a.createElement("pre",null,JSON.stringify(e,null,2))):null}}]),t}(a.Component),g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,n=e.login,a=e.logout;return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.a,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(p.a,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement("button",{onClick:t()?a:n},t()?"Logout":"Login"))))}}]),t}(a.Component),k=n(15),E=function(){function e(t){var n=this;Object(c.a)(this,e),this.login=function(){n.auth0.authorize()},this.handleAuthentication=function(){n.auth0.parseHash(function(e,t){t&&t.accessToken&&t.idToken?(n.setSession(t),n.history.push("/")):e&&(n.history.push("/"),alert("Error: ".concat(e.error,". Check console.")),console.log(e))})},this.setSession=function(e){var t=JSON.stringify(1e3*e.expiresIn+(new Date).getTime());localStorage.setItem("expires_at",t),localStorage.setItem("id_token",e.idToken),localStorage.setItem("access_token",e.accessToken)},this.logout=function(){localStorage.removeItem("expires_at"),localStorage.removeItem("id_token"),localStorage.removeItem("access_token"),n.userProfile=null,n.auth0.logout({clientID:"Xj5Jk5fAFe6SH1WYiwM6Eu07s536Guwf",returnTo:"http://localhost:3000"})},this.getAccessToken=function(){var e=localStorage.getItem("access_token");if(!e)throw new Error("No access token found.");return e},this.getProfile=function(e){if(n.userProfile)return e(n.userProfile);n.auth0.client.userInfo(n.getAccessToken(),function(t,a){a&&(n.userProfile=a),e(a,t)})},this.history=t,this.userProfile=null,this.auth0=new k.a.WebAuth({domain:"dev-arul-learning.auth0.com",clientID:"Xj5Jk5fAFe6SH1WYiwM6Eu07s536Guwf",redirectUri:"https://arulsubramaniam.github.io/callback",responseType:"token id_token",scope:"openid profile email"})}return Object(l.a)(e,[{key:"isAuthenticated",value:function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e}}]),e}(),v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(!/access_token|id_token|error/.test(this.props.location.hash))throw new Error("Invalid callback URL.");this.props.auth.handleAuthentication()}},{key:"render",value:function(){return r.a.createElement("h1",null,"Loading... ")}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).auth=new E(n.props.history),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{auth:this.auth}),r.a.createElement("div",{className:"body"},r.a.createElement(f.a,{path:"/",exact:!0,render:function(t){return r.a.createElement(d,Object.assign({auth:e.auth},t))}}),r.a.createElement(f.a,{path:"/callback",render:function(t){return r.a.createElement(v,Object.assign({auth:e.auth},t))}}),r.a.createElement(f.a,{path:"/profile",render:function(t){return e.auth.isAuthenticated()?r.a.createElement(b,Object.assign({auth:e.auth},t)):r.a.createElement(m.a,{to:"/"})}})))}}]),t}(a.Component),j=n(28);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(j.a,null,r.a.createElement(f.a,{component:O})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.83c4efdd.chunk.js.map